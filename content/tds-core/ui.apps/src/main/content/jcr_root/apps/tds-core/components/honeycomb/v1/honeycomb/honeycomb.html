<div
  data-sly-use.accordion="com.adobe.cq.wcm.core.components.models.Accordion"
  data-panelcontainer="${wcmmode.edit && 'accordion'}"
  id="${accordion.id}"
  class="cmp-accordion"
  data-cmp-is="accordion"
  data-cmp-data-layer="${accordion.data.json}"
  data-cmp-single-expansion="${accordion.singleExpansion}"
  data-placeholder-text="${wcmmode.edit && 'Please drag Accordion item components here' @ i18n}"
>
  <div
    data-sly-test="${accordion.items.size > 0}"
    data-sly-repeat.item="${accordion.items}"
    class="cmp-accordion__item"
    data-cmp-hook-accordion="item"
    data-cmp-data-layer="${item.data.json}"
    id="${item.id}"
    data-cmp-expanded="${item.name in accordion.expandedItems}"
  >
    <h3
      data-sly-element="${accordion.headingElement @ context='elementName'}"
      class="cmp-accordion__header"
    >
      <button
        id="${item.id}-button"
        class="cmp-accordion__button${item.name in accordion.expandedItems ? ' cmp-accordion__button--expanded' : ''}"
        aria-controls="${item.id}-panel"
        data-cmp-hook-accordion="button"
      >
        <div
          class="cmp-honeycomb-svg"
          data-sly-use.backgroundIcon="${'com.tdscore.core.models.AssetUtilities' @ path=properties.iconFileReference}"
        >
          ${backgroundIcon.binary @ context='unsafe'}
        </div>
        <div
          class="cmp-honeycomb-expanded-svg"
          data-sly-use.backgroundIconSelected="${'com.tdscore.core.models.AssetUtilities' @ path=properties.selectedIconFileReference}"
        >
          ${backgroundIconSelected.binary @ context='unsafe'}
        </div>
        <!--svg class="cmp-honeycomb-svg" xmlns="http://www.w3.org/2000/svg" width="112" height="126" viewBox="0 0 112 126">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M51 1.88675C54.094 0.100423 57.906 0.100423 61 1.88675L106.426 28.1132C109.52 29.8996 111.426 33.2008 111.426 36.7735V89.2265C111.426 92.7992 109.52 96.1004 106.426 97.8867L61 124.113C57.906 125.9 54.094 125.9 51 124.113L5.57437 97.8867C2.48036 96.1004 0.574374 92.7992 0.574374 89.2265V36.7735C0.574374 33.2008 2.48036 29.8996 5.57437 28.1132L51 1.88675Z" fill=""/>
        </svg>
        <svg class="cmp-honeycomb-expanded-svg" xmlns="http://www.w3.org/2000/svg" width="112" height="126" viewBox="0 0 120 136" fill="none">
          <path d="M55.75 3.18579C58.3799 1.66741 61.6201 1.66741 64.25 3.18579L114.006 31.9123C116.636 33.4307 118.256 36.2367 118.256 39.2735V96.7265C118.256 99.7633 116.636 102.569 114.006 104.088L64.25 132.814C61.6201 134.333 58.3799 134.333 55.75 132.814L5.99425 104.088C3.36434 102.569 1.74425 99.7633 1.74425 96.7265V39.2735C1.74425 36.2367 3.36434 33.4307 5.99425 31.9123L55.75 3.18579Z" stroke="white" stroke-width="3"/>
        </svg-->
        <span
          class="cmp-accordion__title"
          style="color: ${properties.fontColor @ context='styleToken'}"
          >${item.title}</span
        >
      </button>
    </h3>
    <div
      data-sly-resource="${item.name @ decorationTagName='div'}"
      data-cmp-hook-accordion="panel"
      id="${item.id}-panel"
      class="cmp-accordion__panel${item.name in accordion.expandedItems ? ' cmp-accordion__panel--expanded' : ' cmp-accordion__panel--hidden'}"
      role="region"
      aria-labelledby="${item.id}-button"
    ></div>
  </div>
  <sly
    data-sly-resource="${resource.path @ resourceType='wcm/foundation/components/parsys/newpar', appendPath='/*', decorationTagName='div', cssClassName='new section aem-Grid-newComponent'}"
    data-sly-test="${(wcmmode.edit || wcmmode.preview) && accordion.items.size < 1}"
  ></sly>
</div>
